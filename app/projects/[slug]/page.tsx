import ProjectDetailComponent from "@/components/projects/ProjectDetailComponent";
import type { Metadata } from "next";
import { notFound } from "next/navigation";

const projects = {
  "crm-logistics": {
    id: "crm-logistics",
    title: "CRM для логистической компании",
    category: "CRM/ERP",
    description: "Разработали кастомную CRM-систему для управления грузоперевозками. Полный цикл от заявки до доставки с отслеживанием в реальном времени.",
    fullDescription: `
      Логистическая компания с автопарком из 50+ машин обратилась к нам с проблемой: менеджеры тратили до 30 минут на обработку одной заявки. Информация о грузах, водителях и маршрутах была разбросана по разным Excel-файлам.

      Мы разработали единую систему, которая автоматизирует весь цикл работы с заявкой: от поступления до подтверждения доставки. Интеграция с GPS-трекерами позволяет отслеживать местоположение каждой машины в реальном времени.
    `,
    challenge: "Обработка заявки занимала 30 минут из-за разрозненных данных. Нет единой картины по загрузке автопарка.",
    solution: "Создали единую CRM с модулями: заявки, маршруты, водители, клиенты. Интегрировали GPS-мониторинг и автоматическое распределение заказов.",
    result: "Время обработки заявки сократилось до 5 минут. Загрузка автопарка выросла на 25%. Клиенты видят статус доставки онлайн.",
    technologies: ["React", "Node.js", "PostgreSQL", "Docker", "Redis", "Socket.io"],
    gradient: "from-[#00ff88] to-[#00d4ff]",
    stats: [
      { label: "Сокращение времени", value: "-83%", description: "обработки заявки" },
      { label: "Автоматизация", value: "80%", description: "рутинных процессов" },
      { label: "Рост загрузки", value: "+25%", description: "автопарка" },
      { label: "Срок разработки", value: "4 мес", description: "" },
    ],
    features: [
      "Автоматическое распределение заказов по водителям",
      "GPS-трекинг всего автопарка в реальном времени",
      "Личный кабинет клиента с отслеживанием груза",
      "Автоматические уведомления о статусе доставки",
      "Аналитика и отчёты по эффективности",
      "Мобильное приложение для водителей",
    ],
    timeline: [
      { phase: "Аналитика", duration: "2 недели", description: "Изучение процессов, сбор требований" },
      { phase: "Проектирование", duration: "3 недели", description: "Архитектура, прототипы, ТЗ" },
      { phase: "Разработка", duration: "10 недель", description: "Backend, Frontend, мобильное приложение" },
      { phase: "Тестирование", duration: "2 недели", description: "QA, исправление багов" },
      { phase: "Запуск", duration: "1 неделя", description: "Деплой, обучение персонала" },
    ],
  },
  "ecommerce-platform": {
    id: "ecommerce-platform",
    title: "E-commerce платформа",
    category: "Веб-разработка",
    description: "Создали высоконагруженный интернет-магазин с интеграцией 1C, платёжных систем и служб доставки.",
    fullDescription: `
      Крупный ритейлер электроники решил выйти в онлайн. Требовался современный интернет-магазин, способный выдержать пиковые нагрузки в дни распродаж и бесшовно интегрироваться с существующей инфраструктурой на базе 1C.

      Мы создали быстрый, масштабируемый магазин с кэшированием, lazy-loading и оптимизацией изображений. Синхронизация с 1C происходит в реальном времени — остатки и цены всегда актуальны.
    `,
    challenge: "Старый сайт не выдерживал нагрузки в распродажи. Долгая синхронизация с 1C приводила к ошибкам в остатках.",
    solution: "Next.js для SSR и быстрой загрузки. Redis для кэширования. Очереди для обработки заказов. Двусторонняя синхронизация с 1C.",
    result: "Сайт загружается за 0.8 секунды. Выдерживает 10 000 одновременных пользователей. Конверсия выросла на 40%.",
    technologies: ["Next.js", "TypeScript", "Stripe", "1C API", "AWS", "Redis", "PostgreSQL"],
    gradient: "from-[#00d4ff] to-[#8b5cf6]",
    stats: [
      { label: "Рост конверсии", value: "+40%", description: "" },
      { label: "Время загрузки", value: "<1 сек", description: "" },
      { label: "Пользователей", value: "10K+", description: "одновременно" },
      { label: "Товаров", value: "25K", description: "в каталоге" },
    ],
    features: [
      "Молниеносная загрузка страниц (SSR + ISR)",
      "Двусторонняя синхронизация с 1C",
      "Интеграция со всеми популярными платёжными системами",
      "Автоматический расчёт доставки (СДЭК, Почта, самовывоз)",
      "Умный поиск с автодополнением",
      "Система рекомендаций товаров",
    ],
    timeline: [
      { phase: "Аналитика", duration: "2 недели", description: "Аудит текущего сайта, требования" },
      { phase: "Дизайн", duration: "3 недели", description: "UI/UX, прототипы" },
      { phase: "Разработка", duration: "8 недель", description: "Frontend, Backend, интеграции" },
      { phase: "Миграция", duration: "2 недели", description: "Перенос данных, SEO" },
      { phase: "Запуск", duration: "1 неделя", description: "Деплой, мониторинг" },
    ],
  },
  "hr-portal": {
    id: "hr-portal",
    title: "HR-портал для холдинга",
    category: "Автоматизация",
    description: "Внутренний портал для 500+ сотрудников: заявки, документооборот, обучение, KPI.",
    fullDescription: `
      Крупный производственный холдинг с 500+ сотрудниками столкнулся с проблемой: HR-отдел тонул в бумажной работе. Заявки на отпуск терялись, документы подписывались неделями, а о системе обучения сотрудников можно было только мечтать.

      Мы создали единый портал, где каждый сотрудник может подать заявку, посмотреть свой KPI, пройти обучение и получить нужные справки. HR-отдел освободился от рутины и сфокусировался на стратегических задачах.
    `,
    challenge: "HR тратил 60% времени на рутину: обработка заявок, формирование справок, ручной ввод в 1C ЗУП.",
    solution: "Портал самообслуживания для сотрудников. Автоматические согласования. Интеграция с 1C ЗУП. Система онлайн-обучения.",
    result: "HR экономит 60% времени. Сотрудники решают вопросы за минуты вместо дней. Выросла вовлечённость в обучение.",
    technologies: ["React", "Node.js", "MongoDB", "1C ЗУП", "Telegram Bot", "MinIO"],
    gradient: "from-[#8b5cf6] to-[#ec4899]",
    stats: [
      { label: "Экономия времени HR", value: "60%", description: "" },
      { label: "Сотрудников", value: "500+", description: "используют портал" },
      { label: "Интеграций", value: "5", description: "внешних систем" },
      { label: "Курсов обучения", value: "30+", description: "" },
    ],
    features: [
      "Подача и согласование заявок онлайн",
      "Электронный документооборот с ЭЦП",
      "Личный кабинет с KPI и задачами",
      "Система онлайн-обучения (LMS)",
      "Интеграция с 1C ЗУП",
      "Telegram-бот для уведомлений",
    ],
    timeline: [
      { phase: "Аналитика", duration: "3 недели", description: "Аудит процессов, интервью" },
      { phase: "Проектирование", duration: "3 недели", description: "Архитектура, UX" },
      { phase: "MVP", duration: "6 недель", description: "Базовый функционал" },
      { phase: "Развитие", duration: "8 недель", description: "LMS, интеграции" },
      { phase: "Запуск", duration: "2 недели", description: "Пилот, масштабирование" },
    ],
  },
  "booking-system": {
    id: "booking-system",
    title: "Система бронирования",
    category: "Веб-разработка",
    description: "Онлайн-система бронирования для сети клиник с интеграцией МИС и онлайн-оплатой.",
    fullDescription: `
      Сеть из 12 медицинских клиник хотела увеличить поток пациентов через онлайн-запись. Старая система работала только по телефону, запись велась в Excel, напоминания отправлялись вручную.

      Мы разработали современную систему бронирования с удобным выбором врача, времени и клиники. Автоматические SMS и email напоминания снизили количество пропущенных приёмов вдвое.
    `,
    challenge: "Только телефонная запись. 30% пациентов не приходили на приём из-за забывчивости.",
    solution: "Онлайн-запись на сайте и в приложении. Автоматические напоминания. Интеграция с МИС для синхронизации расписания.",
    result: "Онлайн-записей стало в 3 раза больше. Пропуски сократились на 50%. Администраторы освободились для работы с пациентами.",
    technologies: ["Next.js", "PostgreSQL", "Twilio", "YooKassa", "МИС API", "Redis"],
    gradient: "from-[#ec4899] to-[#f97316]",
    stats: [
      { label: "Онлайн-записей", value: "x3", description: "рост" },
      { label: "Меньше пропусков", value: "-50%", description: "" },
      { label: "Клиник", value: "12", description: "в сети" },
      { label: "Врачей", value: "150+", description: "в системе" },
    ],
    features: [
      "Удобный выбор врача, даты и времени",
      "Онлайн-оплата консультации",
      "SMS и email напоминания",
      "Личный кабинет пациента с историей",
      "Интеграция с МИС клиники",
      "Административная панель для управления",
    ],
    timeline: [
      { phase: "Аналитика", duration: "2 недели", description: "Изучение МИС, требования" },
      { phase: "Дизайн", duration: "2 недели", description: "UI/UX для пациентов и админов" },
      { phase: "Разработка", duration: "8 недель", description: "Frontend, Backend, интеграции" },
      { phase: "Пилот", duration: "2 недели", description: "Запуск в 2 клиниках" },
      { phase: "Масштабирование", duration: "2 недели", description: "Развёртывание на всю сеть" },
    ],
  },
  "analytics-dashboard": {
    id: "analytics-dashboard",
    title: "Аналитическая платформа",
    category: "Автоматизация",
    description: "Дашборд для руководства с агрегацией данных из 8 источников.",
    fullDescription: `
      CEO производственной компании каждое утро тратил 2 часа на сбор отчётов от разных отделов. Данные по продажам, производству, финансам и HR приходили в разных форматах и часто не сходились.

      Мы создали единый дашборд, который автоматически собирает данные из всех систем компании и визуализирует ключевые метрики. Теперь полная картина бизнеса доступна за 5 минут.
    `,
    challenge: "2 часа в день на ручной сбор отчётов. Данные расходятся между отделами. Нет единой картины бизнеса.",
    solution: "ETL-пайплайны для сбора данных. ClickHouse для быстрой аналитики. Интерактивные дашборды с drill-down. Автоматические алерты.",
    result: "Руководство видит все метрики за 5 минут. Автоматические отчёты по расписанию. Быстрое выявление проблем.",
    technologies: ["React", "Python", "ClickHouse", "Grafana", "Airflow", "Redis"],
    gradient: "from-[#f97316] to-[#00ff88]",
    stats: [
      { label: "Источников данных", value: "8", description: "интегрировано" },
      { label: "Экономия времени", value: "-95%", description: "на отчёты" },
      { label: "Автоотчётов", value: "25+", description: "по расписанию" },
      { label: "Метрик", value: "100+", description: "в реальном времени" },
    ],
    features: [
      "Сбор данных из 8 источников (1C, CRM, Excel и др.)",
      "Интерактивные дашборды с drill-down",
      "Автоматические отчёты по расписанию",
      "Алерты при отклонении метрик",
      "Мобильная версия для руководства",
      "Экспорт в PDF и Excel",
    ],
    timeline: [
      { phase: "Аналитика", duration: "3 недели", description: "Аудит источников данных" },
      { phase: "Архитектура", duration: "2 недели", description: "ETL, хранилище" },
      { phase: "Разработка ETL", duration: "4 недели", description: "Интеграции, трансформации" },
      { phase: "Дашборды", duration: "4 недели", description: "Визуализация, отчёты" },
      { phase: "Запуск", duration: "2 недели", description: "Обучение, настройка алертов" },
    ],
  },
  "api-integration": {
    id: "api-integration",
    title: "API-интеграция маркетплейсов",
    category: "Интеграции",
    description: "Единая панель управления товарами на Ozon, Wildberries и Яндекс.Маркет.",
    fullDescription: `
      Селлер с 50 000 товаров продавал на трёх маркетплейсах и каждый день переключался между тремя личными кабинетами. Остатки расходились, цены приходилось обновлять вручную, заказы терялись.

      Мы создали единую панель управления, которая синхронизирует товары, остатки, цены и заказы со всеми маркетплейсами в реальном времени. Один интерфейс вместо трёх.
    `,
    challenge: "3 личных кабинета. Ручное обновление остатков и цен. Ошибки в наличии приводили к отменам.",
    solution: "Единый интерфейс управления. Двусторонняя синхронизация через API. Очереди для надёжной обработки. Автоматические обновления.",
    result: "Один интерфейс вместо трёх. Ошибки в остатках — 0. Время на управление сократилось в 5 раз.",
    technologies: ["Node.js", "REST API", "PostgreSQL", "Redis", "RabbitMQ", "Docker"],
    gradient: "from-[#00d4ff] to-[#00ff88]",
    stats: [
      { label: "Маркетплейсов", value: "3", description: "интегрировано" },
      { label: "Ошибок", value: "0", description: "в остатках" },
      { label: "Товаров", value: "50K+", description: "синхронизировано" },
      { label: "Заказов/день", value: "500+", description: "обрабатывается" },
    ],
    features: [
      "Единый каталог товаров для всех площадок",
      "Автоматическая синхронизация остатков",
      "Массовое обновление цен",
      "Единый поток заказов со всех маркетплейсов",
      "Аналитика продаж по площадкам",
      "Автоматическое создание карточек товаров",
    ],
    timeline: [
      { phase: "Аналитика", duration: "2 недели", description: "Изучение API площадок" },
      { phase: "Проектирование", duration: "2 недели", description: "Архитектура, очереди" },
      { phase: "Интеграции", duration: "6 недель", description: "API Ozon, WB, Яндекс" },
      { phase: "Интерфейс", duration: "4 недели", description: "Панель управления" },
      { phase: "Запуск", duration: "2 недели", description: "Миграция данных, обучение" },
    ],
  },
};

type ProjectSlug = keyof typeof projects;

export async function generateStaticParams() {
  return Object.keys(projects).map((slug) => ({
    slug,
  }));
}

export async function generateMetadata({ params }: { params: Promise<{ slug: string }> }): Promise<Metadata> {
  const { slug } = await params;
  const project = projects[slug as ProjectSlug];

  if (!project) {
    return {
      title: "Проект не найден — WebClinic Solutions",
    };
  }

  return {
    title: `${project.title} — WebClinic Solutions`,
    description: project.description,
    openGraph: {
      title: `${project.title} — WebClinic Solutions`,
      description: project.description,
      url: `https://webclinic-solutions.dev/projects/${slug}`,
    },
  };
}

export default async function ProjectPage({ params }: { params: Promise<{ slug: string }> }) {
  const { slug } = await params;
  const project = projects[slug as ProjectSlug];

  if (!project) {
    notFound();
  }

  return (
    <main>
      <ProjectDetailComponent project={project} />
    </main>
  );
}
